\chapter{Title of the first chapter}

\begin{defn}[Simple random walk in $\mathbb{Z}$]\label{defn-simple_random_walk_Z}
  Let $\{X_n\}_{n=0}^\pinf$ be a sequence of \iid random variables with values in $\{ -1, +1\}$. That $\forall n \in \N$ satisfy $\pr(X_n=1)=p \in (0,1)$ and $\pr(X_n=-1)=1-p=q$. Let $S_0=0$ and $S_n=\suma[i][1][n]X_i$. We call the pair $\left(\{S_n\}_{n=0}^\pinf, p \right)$ \emph{Simple random walk in $\mathbb{Z}$}. In case that $p=q=\frac{1}{2}$ we call the pair $\left(\{S_n\}_{n=0}^\pinf, p \right)$ \emph{Symmetric simple random walk in $\mathbb{Z}$}.
\end{defn}

\begin{rem}
  Very often we refer to $n$ as \Time, $X_i$ as i-th step and $S_n$ as position \intime $n$. In simple random walk in $\Z$ we refer to $X_i=+1$ as i-th step was rightwards. If not stated otherwise, we
\end{rem}

\begin{defn}[Set of possible positions]\label{defn-set_all_possible_values}
  Let \rw be a random walk. We call the set $A_n=\{z \in \Z; \abs{z}\leq n, \frac{z+n}{2}\in \Z \}$ set of all possible positions of random walk \rw \intime $n$.
\end{defn}

\begin{thm}[Probability of position $x$ \intime $n$]\label{thm-probability_position_time}
  Let \rw be a random walk and $A_n$ its set of possible positions.
  \[
  \pr(S_n=x)=
  \begin{cases}
  \binom{n}{\frac{x+n}{2}}p^{\frac{n+x}{2}}q^{\frac{n-x}{2}} & \text{for $x \in A_n$ },\\
  0, & \text{for $x \not\in A_n$}.
  \end{cases}
  \]
\end{thm}
\begin{proof}
  Let us define new variables $r_i=\indikator{X_i=1}, l_i=\indikator{X_i=-1}, R_n=\suma r_i, L_n=\suma l_i$. $r_i$ can be interpreted as indicator wether i-th step was rightwards. Then $R_n$ is number of rightwards steps and $L_n$ is number of leftwards steps. We can easily see that $R_n+L_n=n$ and $R_n-L_n=S_n$. Therefore we get by adding these two equations $R_n=\frac{S_n+n}{2}.$

  $r_i$ has alternative distribution with parameter $p$ (\textit{Alt(p)}). Therefore $R_n$ as a sum of \iid random variables with \textit{Alt(p)} has binomial distribution with parameters $n$ and $p$ (\textit{Bi(n,p)}). Therefore we get $\pr(R_n=x)=\binom{n}{\frac{x+n}{2}}p^{\frac{n+x}{2}}q^{\frac{n-x}{2}}$. Where we define $\binom{a}{x}\dosad 0$ for $a \in \N, x\in \R \setminus \N$, $x<0$, $x>n$. Therefore we get $\pr(S_n=x)=\pr\left( R_n=\frac{x+n}{2}\right)=  \binom{n}{\frac{x+n}{2}}p^{\frac{n+x}{2}}q^{\frac{n-x}{2}}.$
\end{proof}



\begin{lemma}[Spatial homogeneity]\label{thm-spatial_homogeneity}
  $\pr(S_n=j|S_0=a)=\pr(S_n=j+b|S_0=a+b) \forall b \in \Z$
\end{lemma}
\begin{proof}
  $\pr(S_n=j|S_0=a)=\pr \left(\suma X_i=j-a\right)=\pr \left(\suma X_i=(j+b)-(a+b)\right)=\pr(S_n=j+b|S_0=a+b).$
\end{proof}

\begin{lemma}[Temporal homogeneity]\label{thm-temporal_homogeneity}
  $\pr(S_n=j|S_0=a)=\pr(S_{n+m}=j|S_m=a) \forall m \in \N$
\end{lemma}
\begin{proof}
  $\pr(S_n=j|S_0=a)=\pr\left(\suma X_i=j-a \right)=\pr\left(\suma[i][m+1][m+n]X_i=j-a \right)=\pr(S_{n+m}=j|S_m=a).$
\end{proof}

\begin{lemma}[Markov property]\label{thm-markov_property}
  Let $n\geq m$ and $a_i \in \Z$. Then $\pr(S_n=j|S_0=a_0, S_1=a_1, \ldots, S_m=a_m)=\pr(S_n=j|S_m=a_m)$
\end{lemma}
\begin{proof}
  Once $S_m$ is known, then distribution of $S_n$ depends only on steps $X_{m+1}, X_{m+2}, \ldots X_n$ and therefore cannot be dependent on any information concerning values $X_1, X_2, \ldots, X_m-1$ and accordingly $S_1, S_2, \ldots, S_m-1.$
\end{proof}

\begin{rem}
  In symmetric random walk, everything can be counted by number of possible paths from point to point.
\end{rem}

\begin{defn}[Number of possible paths]\label{defn-number_possible_paths}
  Let $N_n(a,b)$ be number of posssible paths of random walk \rw from point $(0,a)$ to point $(n,b)$ and $N_n^x(a,b)$ be number of possible paths from point $(0,a)$ to point $(n,b)$ that visit point $(z,x)$ for some $z \in \{0, \ldots n \}$.
\end{defn}
\begin{thm}\label{thm-number_of_possible_paths}
  Let $a,b \in \Z, n \in \N$ then $N_n(a,b)=\binom{n}{\frac{1}{2}(n+b-a)}.$
\end{thm}
\begin{proof}
  Let us choose a path from $(0,a)$ to $(n,b)$ and let $\alpha$ be number of rightwards steps and $\beta$ be number of leftwards steps. Then $\alpha+\beta=n$ and $\alpha-\beta=b-a$. By adding these two equations we get that $\alpha=\frac{1}{2}(n+b-a)$. The number of possible paths is the number of ways of picking $\alpha$ rightwards steps from $n$ steps. Therefore we get $N_n(a,b)=\binom{n}{\alpha}=\binom{n}{\frac{1}{2}(n+b-a)}.$
\end{proof}
\begin{thm}[Reflection principle]\label{thm-reflection_principle}
  Let $a,b >0$, then $N_n^0(a,b)=N_n(-a,b)$.
\end{thm}
\begin{proof}
  Each path from $(0,-a)$ to $(n,b)$ has to intersect $x$-axis at least once at some point. Let $k$ be the \Time of earliest intersection with $x$-axis. By reflexing the segment from $(0,-a)$ to $(k,0)$ in the $x$-axis, we get a path from point $(0,a)$ to $(n,b)$ which visits $0$ at point $k$. Because reflection is bijective operation on sets of paths, we get the correspondence between the collections of such paths.
\end{proof}
\begin{defn}[Return to origin]\label{defn-return_origin}
  Let \rw be a random walk. Then if $\exists k \in \N$ such that $S_k=0$ then we say that in $k$-th step occured return to origin.
  Let \rw be a random walk. Then if $S_1,S_2, \ldots, S_{2n-1}\neq 0$ and $S_{2n}=0$
\end{defn}
\begin{thm}[Ballot theorem]\label{thm-ballot_theorem}
  Let $n,b \in N$
  Number of paths from point $(0,0)$ to point $(n,b)$ which do not return to origin is equal to $\frac{b}{n}N_n(0,b)$
\end{thm}
\begin{proof}
  Let us call $N$ the number of paths we are refering to.
  Because the path ends at point $(n,b)$, the first step has to be rightwards. Therefore we now have $N=N_{n-1}(1,b)-N_{n-1}^0(1,b)=N_{n-1}(1,b)-N_{n-1}(-1,b)$. The last equation was aquired using Ballot theorem (\ref{thm-reflection}). We now have:\[
    N_{n-1}(1,b)-N_{n-1}(-1,b)=\binom{n-1}{\frac{n}{2}+\frac{b}{2}-1}-\binom{n-1}{\frac{n}{2}+\frac{b}{2}}=\frac{(n-1)!}{(\frac{n}{2}+\frac{b}{2}-1)!(\frac{n}{2}-\frac{b}{2})!}-\frac{(n-1)!}{(\frac{n}{2}+\frac{b}{2})!(\frac{n}{2}-\frac{b}{2}-1)!}=\frac{(n-1)!}{(\frac{n}{2}+\frac{b}{2}-1)!(\frac{n}{2}-\frac{b}{2})(\frac{n}{2}-\frac{b}{2}-1)!}-\frac{(n-1)!}{(\frac{n}{2}+\frac{b}{2})(\frac{n}{2}+\frac{b}{2}-1)!(\frac{n}{2}-\frac{b}{2}-1)!}=\frac{(n-1)!}{(\frac{n}{2}+\frac{b}{2}-1)!(\frac{n}{2}-\frac{b}{2}-1)!}\left( \frac{1}{\frac{n}{2}-\frac{b}{2}}-\frac{1}{\frac{n}{2}+\frac{b}{2}}\right)=\frac{1}{n}\frac{n!}{(\frac{n}{2}+\frac{b}{2}-1)!(\frac{n}{2}-\frac{b}{2}-1)!}\left( \frac{(\frac{n}{2}+\frac{b}{2}-\frac{n}{2}+\frac{b}{2})}{(\frac{n}{2}-\frac{b}{2})(\frac{n}{2}+\frac{b}{2}})\right)=\frac{b}{n}\frac{n!}{(\frac{n}{2}+\frac{b}{2})!(\frac{n}{2}-\frac{b}{2})!}=\frac{b}{n}\binom{n}{(\frac{n}{2}+\frac{b}{2})}=\frac{b}{n}N_n(0,b)
  \]\end{proof}
\begin{defn}\label{defn-max}
  $M_n=\max \{S_i, i\in \{0, 1, \ldots, n \} \}$
\end{defn}
\begin{thm}[Probability of maximum up to \Time $n$]\label{thm-probability_maximum_upto_time}
  Let \rw be a random walk.
  \[\pr(M_n\geq r, S_n=b)=
    \begin{cases}
    \pr(S_n=b) & \text{for $b \geq r$ },\\
    \pr(S_n=2r-b)\left( \frac{q}{p}\right)^{r-b}, & \text{for $otherwise$}.
    \end{cases}
    \]
\end{thm}
\begin{proof}
  Let us firstly consider the easier case in which $b \geq r$. Because we defined $M_n$ as $\max \{S_i, i\in \{0, 1, \ldots, n \} \}$ we get that $M_n \geq b \geq r$ therefore $[M_n \geq r] \subset [S_n=b]$ therefore we get $\pr(M_n\geq r, S_n=b)=
  \pr(S_n=b)$.
  Let $r\geq 1, b<r$. $N_n^r(0,b)$ stands for number of paths from point $(0,0)$ to point $(n,b)$ which reach up to $r$. Let $k \in \{ 0, 1, \ldots, n \}$ denote the first \Time we reach $r$. By reflection principle (\ref{thm-reflection}), we can reflex the segment from $(k,r)$ to $(n,b)$ in the axis:$y=r$. Therefore we now have path from $(0,0)$ to $(n,2r-b)$ and we get that $N_n^r(0,b)=N_n(0,2r-b)$. $\pr(S_n=b,M_n\geq r)=N_n^r(0,b)p^{\frac{n+b}{2}}q^{\frac{n-b}{2}}=N_n(0,2r-b)p^{\frac{n+(2r-b)}{2}}q^{\frac{n-(2r-b)}{2}}p^{\frac{n+b}{2}}q^{\frac{n-b}{2}}p^{b-r}q^{r-b}=\left( \frac{q}{p}\right)^{r-b}\pr(S_n=2r-b).$
\end{proof}

\begin{defn}[Walk reaching new maximum at particular \Time]\label{defn-new_maximum}
  Let $b >0$. $f_b(n)$ denotes the probability that we reach new maximum $b$ \intime $n$. $f_b(n)=\pr(M_{n-1}=S_{n-1}=b-1, S_n=b)$
\end{defn}
\begin{thm}[Probability of reaching new maximum $b$ \intime $n$]\label{thm-probability_new_maximum}
  Let $b>0$ then $f_b(n)=\frac{b}{n}\pr(S_n=b).$
\end{thm}
\begin{proof}
  $f_b=\pr(M_{n-1}=S_{n-1}=b-1, S_n=b)=p\pr(M_{n-1}=S_{n-1}=b-1)=p\left(\pr(M_{n-1}\geq b-1, S_{n-1}=b-1)-\pr(M_{n-1}\geq b, S_{n-1}=b-1) \right)=p\left(\pr(S_{n-1}=b-1)-\frac{q}{p}\pr(S_{n-1}=b+1)\right)=p\pr(S_{n-1}=b-1)-q \pr (S_{n-1}=b+1)=\binom{n-1}{\frac{n}{2}+\frac{b}{2}-1}p^{\frac{n}{2}+\frac{b}{2}}q^{\frac{n}{2}-\frac{b}{2}}-\binom{n-1}{\frac{n}{2}+\frac{b}{2}}p^{\frac{n}{2}+\frac{b}{2}}q^{\frac{n}{2}-\frac{b}{2}}=p^{\frac{n}{2}+\frac{b}{2}}q^{\frac{n}{2}-\frac{b}{2}}\left(\frac{(n-1)!}{(\frac{n}{2}+\frac{b}{2}-1)!(\frac{n}{2}-\frac{b}{2})!}-\frac{(n-1)!}{(\frac{n}{2}+\frac{b}{2})!(\frac{n}{2}-\frac{b}{2}-1)!} \right)=p^{\frac{n}{2}+\frac{b}{2}}q^{\frac{n}{2}-\frac{b}{2}}\left(\frac{(n-1)!}{(\frac{n}{2}+\frac{b}{2})!(\frac{n}{2}-\frac{b}{2})!}\right)\left(\frac{1}{\frac{n}{2}-\frac{b}{2}}-\frac{1}{\frac{n}{2}+\frac{b}{2}} \right)=p^{\frac{n}{2}+\frac{b}{2}}q^{\frac{n}{2}-\frac{b}{2}}\frac{b}{n}\left(\frac{n!}{(\frac{n}{2}+\frac{b}{2})!(\frac{n}{2}-\frac{b}{2})!} \right)=\frac{b}{n}p^{\frac{n}{2}+\frac{b}{2}}q^{\frac{n}{2}-\frac{b}{2}}\binom{n}{\frac{n}{2}+\frac{b}{2}}=\frac{b}{n}\pr(S_n=b).$
  %druhÃ¡ rovnost $\pr(X_n=1)=p$ 4. rovnost \ref{thm-probability-of-maximum}}
\end{proof}
\begin{thm}[XXXMean number of visits to $b$ before returning to origin in symmetric random walk]\label{thm-mean_number_visits}
  Let \rw be a symmetric random walk. Mean number $\mu_b$ of visits of the walk to point $b$ before returning to origin is equal to 1.
\end{thm}
\begin{proof}
  aa
\end{proof}
\begin{defn}[Return to origin]\label{defn-return_origin}
  Let \rw be a random walk. Let $k \in \N$. We say a \emph{return to origin} occurred \intime $2k$ if $S_{2k}=0$. The probability that \intime $2k$ occured a return to origin shall be denoted by $u_{2k}$.
  We say that \intime $2k$ occurred \emph{first return to origin} if $S_1, S_2, \ldots S_{2k-1}\neq 0$ and $S_{2k}=0$.
  The probability that \intime $2k$ occured first return to origin shall be denoted by $f_{2k}$. By definition $f_0=0$.
  Let $\alpha{2n}(2k)$ denote $u_{2k}u_{2(n-k)}$
\end{defn}

\begin{lemma}[Binomial identity]\label{thm-binom_identity}
  Let $n,k \in \N, n>k:\binom{n-1}{k}-\binom{n-1}{k-1}=\frac{n-2k}{n}\binom{n}{k}$
\end{lemma}
\begin{proof}
  $\binom{n-1}{k}-\binom{n-1}{k-1}=\frac{(n-1)!}{k!(n-k-1)!}-\frac{(n-1)!}{(k-1)!(n-k)!}=\frac{(n-1)!}{(k-1)!(n-k-1)!}\left(\frac{1}{k}-\frac{1}{n-k}\right)=\frac{1}{n}\frac{n!}{(k-1)!(n-k-1)!}\frac{n-2k}{k(n-k)}=\frac{n-2k}{n}\frac{n!}{k!(n-k)!}=\frac{n-2k}{n}\binom{n}{k}$
\end{proof}
\begin{lemma}[Main lemma]\label{thm-main_lemma}
  Let \rw be a symmetrical random walk. Then $\pr(S_1\cdot S_2, \cdot, \ldots, S_{2n}\neq 0)=\pr(S_{2n}=0)$
\end{lemma}
\begin{proof}
  $\pr(S_1\cdot S_2, \cdot, \ldots, S_{2n}\neq 0)=\suma[i][-\infty][\pinf] \pr(S_1\cdot S_2, \cdot, \ldots, S_{2n-1}\neq 0, S_{2n}=2i)=\suma[i][-n][n] \pr(S_1\cdot S_2, \cdot, \ldots, S_{2n-1}\neq 0, S_{2n}=2i)=2\cdot \suma \pr(S_1\cdot S_2, \cdot, \ldots, S_{2n-1}\neq 0, S_{2n}=2i)=2\suma \frac{2i}{2n}\pr(S_{2n}=2k)=2\suma \frac{2i}{2n}\binom{2n}{n+i}2^{-2n}=2\cdot 2^{-2n}\suma \left( \binom{2n-1}{m+k-1}-\binom{2n-1}{m+k}\right)=2\cdot 2^{-2n}\binom{2n-1}{n}=2^{-2n}\frac{2n}{n}\binom{2n-1}{n}=2^{-2n}\frac{2n(2n-1)!}{m(m-1)!m!}=2^{-2n}\frac{(2n)!}{m!m!}=2^{-2n}\binom{2n}{n}=\pr(S_2n=0)$
\end{proof}
\begin{thm}\label{thm-return_origin_upto_time}
  Let \rw be a symmetric random walk. The probability that the last return to origin up to \Time $2n$ occurred \intime $2k$ is $\pr(S_{2k}=0)\pr(S_{2(n-k)}=0)$.
\end{thm}
\begin{proof}
  $\alpha{2n}(2k)=u_{2k}u_{2(n-k)}=\pr(S_{2k}=0)\pr(S_{2k+1}\cdot S_{2k+2}\cdot, \ldots, S_{2n}\neq 0| S_{2k}=0)=\pr(S_{2k}=0)\pr(S_{1}\cdot S_{2}\cdot, \ldots, S_{2(n-k)}\neq 0)=\pr(S_{2k}=0)\pr(S_{2(n-k)}=0) $
\end{proof}
\begin{thm}\label{thm-XXXX}
  Let $b \in Z$. $\pr(S_1\cdot S_2 \cdot, \ldots, S_n\neq 0, S_n=b)=\frac{\abs{b}}{n}\pr(S_n=b)$.
\end{thm}
\begin{proof}
  Let us \Wlog assume that $b>0$. In that case, first step has to be rightwards ($X_1=+1$). Now we have path from point $(1,1)$ to point $(n,b)$ that does not return to origin. By Ballot theorem \ref{thm-ballot_theorem} there are $\frac{b}{n}N_n(0,b)$ such paths. Each path consists of $\frac{n+b}{2}$ rightwards steps and $\frac{n-b}{2}$ leftwards steps. Therefore $\pr(S_1\cdot S_2 \cdot, \ldots, S_n\neq 0, S_n=b)=\frac{b}{n}N_n(0,b)p^{\frac{n+b}{2}}q^{\frac{n-b}{2}}=\frac{b}{n}\pr(S_n=b)$. Case $b<0$ is identical.
\end{proof}

\begin{lemma}\label{thm-XXX}
  Let \rw be a symmetric random walk. $\pr(S_1, S_2, \ldots, S_{2n}>0)=\frac{1}{2}\pr(S_{2n}=0)=\frac{1}{2}u_{2n}.$
\end{lemma}
\begin{proof}
  Because $S_i>0 \forall i \in \N$ the first step has to be rightwards ($X_1=S_1=1$). Therefore we get
  $\pr(S_1, S_2, \ldots, S_{2n}>0)=\suma\pr(S_1, S_2, \ldots, S_{2n}> 0, S_{2n}=2r )$. The $r$-th term follows equation:
  $\pr(S_1, S_2, \ldots, S_{2n}> 0, S_{2n}=2r)=\pr(X_1=1, S_2, \ldots, S_{2n}> 0, S_{2n}=2r)=\frac{1}{2}\pr(S_2, S_3, \ldots, S_{2n}> 0, S_{2n}=2r)=\frac{1}{2}\left(\pr(S_{2n}=2r)-\pr(S_2\cdot S_3\cdot \ldots \cdot S_{2n}=0, S_{2n}=2r)\right)=\frac{1}{2}\left(\frac{1}{2}^{2n-1}N_{2n-1}(1,2r)-\frac{1}{2}^{2n-1}N_{2n-1}^0(1,2r)\right)=\frac{1}{2}\frac{1}{2}^{2n-1}\left(N_{2n-1}(1,2r)-N_{2n-1}^0(1,2r)\right)=\frac{1}{2}\frac{1}{2}^{2n-1}\left(N_{2n-1}(1,2r)-N_{2n-1}(-1,2r)\right)=\frac{1}{2}\frac{1}{2}^{2n-1}\left(\binom{2n-1}{n+r-1}-\binom{2n-1}{n+r}\right)$. Therefore the negative parts of $r$-th terms cancel against the positive parts of $(r+1)$-st terms and the result reduces to just
\end{proof}
\section{Title of the first subchapter of the first chapter}

\section{Title of the second subchapter of the first chapter}
rem
